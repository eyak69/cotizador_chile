# Aprendizajes del Proyecto

- **Persistencia de Datos**: Siempre se debe agregar datos por medio de herramientas (scripts como `seed_prompts.js` o migraciones) para que quede documentado y se pueda recuperar en caso de reinicio de la base de datos.
- **Diferencias Visuales en Docker**: Las fuentes "system-ui" varían drásticamente entre Windows y Linux (Docker). Para consistencia visual, siempre define fuentes web explícitas (e.g., 'Outfit', 'Roboto') en el CSS global (`:root` o `body`), evitando depender de las fuentes del sistema operativo.
- **Docker en Monorepos**: Es CRÍTICO usar `**/node_modules` en `.dockerignore`. Si usas solo `node_modules`, las carpetas anidadas (ej: `frontend/node_modules`) se copiarán al contenedor, llevando binarios de Windows a Linux y rompiendo el build silenciosamente.
- **Conflictos Legacy vs SPA**: Al migrar o coexistir con aplicaciones antiguas en Express, NUNCA uses `app.use(express.static('public'))` globalmente si esa carpeta contiene un `index.html` viejo. Express servirá ese archivo antes que tu aplicación React, ocultándola por completo.
- **Manejo de Valores Falsy (0 vs null)**: En JavaScript, el número `0` se evalúa como falso. Al usar el operador OR (`||`) para asignar valores por defecto (ej: `val || default`), el `0` será reemplazado por el default, lo cual es incorrecto si `0` es un valor válido. Para evitar esto, utiliza Nullish Coalescing (`??`) en el frontend y validaciones explícitas de `undefined` en el backend.
- **Inicialización Explícita de Servicios**: Importar un módulo de conexión a base de datos (e.g., `{ connectDB } = require('./database')`) NO ejecuta la conexión automáticamente. Siempre verifica que la función de inicialización se INVOQUE explícitamente al arranque del servidor (e.g., `connectDB()`).
- **Robustez ante Filtros de Seguridad IA**: Al usar APIs generativas como Gemini, no asumas que siempre devolverán texto. Los filtros de seguridad ("Safety Filters") pueden bloquear la respuesta, resultando en `candidates` vacíos. Siempre verifica `response.candidates` antes de intentar extraer texto para evitar excepciones no controladas.
